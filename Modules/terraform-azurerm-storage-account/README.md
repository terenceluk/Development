# AzureRM storage-account module

## Requirements

| Name | Version |
|------|---------|
| terraform | >= 0.13 |
| azurerm | >= 3.9.0 |

## Providers

| Name | Version |
|------|---------|
| azurerm | >= 3.9.0 |
| null | n/a |
| random | n/a |

## Modules

| Name | Source | Version |
|------|--------|---------|
| keyvault | terraform.corp.ad.ctc/azure/keyvault/azurerm | 3.3.7 |
| vault_mount_secrets | terraform.corp.ad.ctc/azure/mount-secrets/vault | 1.1.2 |

## Resources

| Name |
|------|
| [azurerm_advanced_threat_protection](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/advanced_threat_protection) |
| [azurerm_eventgrid_event_subscription](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/eventgrid_event_subscription) |
| [azurerm_key_vault_key](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/key_vault_key) |
| [azurerm_key_vault_secret](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/key_vault_secret) |
| [azurerm_monitor_diagnostic_categories](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/data-sources/monitor_diagnostic_categories) |
| [azurerm_monitor_diagnostic_setting](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/monitor_diagnostic_setting) |
| [azurerm_private_endpoint](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/private_endpoint) |
| [azurerm_role_assignment](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/role_assignment) |
| [azurerm_storage_account_customer_managed_key](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_account_customer_managed_key) |
| [azurerm_storage_account_network_rules](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_account_network_rules) |
| [azurerm_storage_account](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_account) |
| [azurerm_storage_container](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_container) |
| [azurerm_storage_data_lake_gen2_filesystem](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_data_lake_gen2_filesystem) |
| [azurerm_storage_data_lake_gen2_path](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_data_lake_gen2_path) |
| [azurerm_storage_encryption_scope](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_encryption_scope) |
| [azurerm_storage_management_policy](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_management_policy) |
| [azurerm_storage_queue](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_queue) |
| [azurerm_storage_share_directory](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_share_directory) |
| [azurerm_storage_share](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_share) |
| [azurerm_storage_table_entity](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_table_entity) |
| [azurerm_storage_table](https://registry.terraform.io/providers/hashicorp/azurerm/3.9.0/docs/resources/storage_table) |
| [null_resource](https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource) |
| [random_string](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/string) |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| access\_tier | Defines the access tier for BlobStorage, FileStorage and StorageV2 accounts. | `string` | `"Hot"` | no |
| account\_tier | Defines the Tier to use for this storage account | `string` | `"Standard"` | no |
| allow\_nested\_items\_to\_be\_public | Allow or disallow nested items within this Account to opt into being public. | `bool` | `false` | no |
| azure\_files\_authentication | A azure\_files\_authentication block<pre>type = object({<br>    directory_type = string<br>    active_directory = object({<br>      storage_sid         = string<br>      domain_name         = string<br>      domain_sid          = string<br>      domain_guid         = string<br>      forest_name         = string<br>      netbios_domain_name = string<br>    })<br>  })<br><br>  directory_type [string] - (Required) Specifies the directory service used. Possible values are AADDS and AD.<br><br>  A active_directory (Optional) block supports the following:<br>    storage_sid [string] - (Required) Specifies the security identifier (SID) for Azure Storage.<br>    domain_name [string] - (Required) Specifies the primary domain that the AD DNS server is authoritative for.<br>    domain_sid [string] - (Required) Specifies the security identifier (SID).<br>    domain_guid [string] - (Required) Specifies the domain GUID.<br>    forest_name [string] - (Required) Specifies the Active Directory forest.<br>    netbios_domain_name [string] - (Required) Specifies the NetBIOS domain name.</pre> | `any` | `null` | no |
| blob\_properties | A blob\_properties (Optional) block<pre>type = object({<br>    cors_rule = list(object({<br>      allowed_origins    = list(string)<br>      allowed_methods    = list(string)<br>      allowed_headers    = list(string)<br>      exposed_headers    = list(string)<br>      max_age_in_seconds = number<br>    }))<br>    delete_retention_policy = object({<br>      days = number<br>    })<br>    change_feed_enabled     = bool<br>    default_service_version = string<br>    container_delete_retention_policy = object({<br>      days = number<br>    })<br>  })<br><br>  A cors_rule (Optional) block supports the following:<br>    allowed_headers [list(string)] - (Required) A list of headers that are allowed to be a part of the cross-origin request.<br>    allowed_methods [list(string)] - (Required) A list of http methods that are allowed to be executed by the origin. Valid options are DELETE, GET, HEAD, MERGE, POST, OPTIONS, PUT or PATCH.<br>    allowed_origins [list(string)] - (Required) A list of origin domains that will be allowed by CORS.<br>    exposed_headers [list(string)] - (Required) A list of response headers that are exposed to CORS clients.<br>    max_age_in_seconds [number] - (Required) The number of seconds the client should cache a preflight response.<br><br>  A delete_retention_policy (Optional) block supports the following:<br>    days [number] - (Optional) Specifies the number of days that the blob should be retained, between 1 and 365 days. Defaults to 7 <br><br>  change_feed_enabled [bool] - (Optional) Is the blob service properties for change feed events enabled? Default to false. <br>  default_service_version [string] - (Optional) The API Version which should be used by default for requests to the Data Plane API if an incoming request doesn't specify an API Version. Defaults to 2020-06-12.  <br> <br>  A container_delete_retention_policy (Optional) block supports the following:<br>    days [number] - (Optional) Specifies the number of days that the container should be retained, between 1 and 365 days. Defaults to 7.</pre> | `any` | `null` | no |
| blob\_types | An array of predefined values. Valid options are blockBlob and appendBlob | `list(string)` | <pre>[<br>  "blockBlob",<br>  "appendBlob"<br>]</pre> | no |
| brand | Default brand name | `string` | `"ctc"` | no |
| bypass | Specifies whether traffic is bypassed for Logging/Metrics/AzureServices. Valid options are any combination of Logging, Metrics, AzureServices, or None. | `list` | <pre>[<br>  "None"<br>]</pre> | no |
| containers | List of containers to create and their access levels<pre>type = list(object({<br>    name                  = string<br>    container_access_type = string<br>    metadata              = map(string)<br>  }))<br><br>  name [string] - (Required) The name of the Container which should be created within the Storage Account<br>  container_access_type [string] - (Optional) The Access Level configured for this Container. Possible values are blob, container or private. Defaults to private<br>  metadata [map(string)] - (Optional) A mapping of MetaData for this Container. All metadata keys should be lowercase</pre> | `any` | `[]` | no |
| costcenter | Assigned cost center | `string` | `null` | no |
| cross\_tenant\_replication\_enabled | Should cross Tenant replication be enabled? | `bool` | `true` | no |
| custom\_domain | A custom\_domain (Optional) block<pre>type = object({<br>    name          = string<br>    use_subdomain = bool<br>  })<br><br>  name [string]- (Required) The Custom Domain Name to use for the Storage Account, which will be validated by Azure.  <br>  use_subdomain [bool] - (Optional) Should the Custom Domain Name be validated by using indirect CNAME validation?</pre> | `any` | `null` | no |
| customer\_managed\_key | A customer\_managed\_key (Optional) block<pre>type = object({<br>    key_vault_key_id          = string<br>    user_assigned_identity_id = string<br>  })<br><br>  key_vault_key_id [string] - (Required) The ID of the Key Vault Key, supplying a version-less key ID will enable auto-rotation of this key.<br>  user_assigned_identity_id [string] - (Required) The ID of a user assigned identity.<br>  NOTE:<br>  customer_managed_key can only be set when the account_kind is set to StorageV2 and the identity type is UserAssigned</pre> | <pre>object({<br>    key_vault_key_id          = string<br>    user_assigned_identity_id = string<br>  })</pre> | `null` | no |
| default\_action | Specifies the default action of allow or deny when no other rules match. | `string` | `"Deny"` | no |
| diagnostics | Diagnostic settings for those resources that support it. See README.md for details on configuration. | <pre>object({<br>    destination   = string<br>    eventhub_name = string<br>    logs          = list(string)<br>    metrics       = list(string)<br>  })</pre> | `null` | no |
| disable\_private\_endpoint\_kv | Disable private endpoint for resource type - key vault | `bool` | `false` | no |
| edge\_zone | (Optional) Specifies the Edge Zone within the Azure Region where this Storage Account should exist. Changing this forces a new Storage Account to be created. | `string` | `null` | no |
| enable\_customer\_managed\_keys | Enable customer managed keys | `bool` | `true` | no |
| enable\_encryption | Enable encryption with platform managed key | `bool` | `false` | no |
| enable\_privatelink | Variable to turn on Privatelink for the Module Resources. | `bool` | `true` | no |
| environment | Which enviroment sandbox nonprod prod | `string` | n/a | yes |
| events | List of event subscriptions. See documentation for format description. | `any` | `[]` | no |
| force\_create\_private\_endpoint\_containers | Create private endpoint for resource type - containers | `bool` | `false` | no |
| force\_create\_private\_endpoint\_gen2fs | Create private endpoint for resource type - gen2fs | `bool` | `false` | no |
| force\_create\_private\_endpoint\_index\_document | Create private endpoint for resource type - index document | `bool` | `false` | no |
| force\_create\_private\_endpoint\_queues | Create private endpoint for resource type - queues | `bool` | `false` | no |
| force\_create\_private\_endpoint\_shares | Create private endpoint for resource type - shares | `bool` | `false` | no |
| force\_create\_private\_endpoint\_tables | Create private endpoint for resource type - tables | `bool` | `false` | no |
| gen2fs | Map to create a Data Lake Gen2 File System within an Azure Storage Account<pre>type = list(object({<br>    name       = string<br>    properties = map(string)<br>    owner      = string<br>    group      = string<br>    ace = list(object({<br>      type        = string<br>      permissions = string<br>      scope       = string<br>      id          = string<br>    }))<br>  }))<br><br>  name [string] - (Required) The name of the Data Lake Gen2 File System which should be created within the Storage Account. Must be unique within the storage account the queue is located. Changing this forces a new resource to be created<br>  properties [map(string)] - (Optional) A mapping of Key to Base64-Encoded Values which should be assigned to this Data Lake Gen2 File System.<br>  owner [string] - (Optional) Specifies the Object ID of the Azure Active Directory User to make the owning user of the root path (i.e. /). Possible values also include $superuser<br>  group [string] - (Optional) Specifies the Object ID of the Azure Active Directory Group to make the owning group of the root path (i.e. /). Possible values also include $superuser.<br>    NOTE:<br>    The Storage Account requires account_kind to be either StorageV2 or BlobStorage. In addition, is_hns_enabled has to be set to true<br><br>  An ace (Optional) block supports the following<br>    scope [string] - (Optional) Specifies whether the ACE represents an access entry or a default entry. Default value is access.<br>    type [string] - (Required) Specifies the type of entry. Can be user, group, mask or other.<br>    id [string] - (Optional) Specifies the Object ID of the Azure Active Directory User or Group that the entry relates to. Only valid for user or group entries.<br>    permissions [string] - (Required) Specifies the permissions for the entry in rwx form. For example, rwx gives full permissions but r-- only gives read permissions</pre> | `any` | `[]` | no |
| identity | An identity (Optional) block<pre>type = object({<br>    type         = string<br>    identity_ids = list(string)<br>  })<br><br>  type [string] - (Required) Specifies the type of Managed Service Identity that should be configured on this Storage Account. Possible values are SystemAssigned, UserAssigned, SystemAssigned, UserAssigned (to enable both).<br>  identity_ids [list(string)] - (Optional) Specifies a list of User Assigned Managed Identity IDs to be assigned to this Storage Account.<br>  NOTE:<br>  This is required when type is set to UserAssigned or SystemAssigned, UserAssigned.<br>  NOTE:<br>  The assigned principal_id and tenant_id can be retrieved after the identity type has been set to SystemAssigned and Storage Account has been created. More details are available below.</pre> | `any` | <pre>{<br>  "identity_ids": null,<br>  "type": "SystemAssigned"<br>}</pre> | no |
| infrastructure\_encryption\_enabled | Is infrastructure encryption enabled?. Changing this forces a new resource to be created. | `bool` | `false` | no |
| ip\_rules | List of public IP or IP ranges in CIDR Format. Only IPV4 addresses are allowed. | `list` | `[]` | no |
| is\_BootDiag | Variable to set replication type to RAGRS when using for BootDiag storage | `bool` | `false` | no |
| is\_hns\_enabled | Is Hierarchical Namespace enabled? This can be used with Azure Data Lake Storage Gen 2. Changing this forces a new resource to be created. | `bool` | `false` | no |
| key\_vault\_id | The ID of the custom Key Vault where the Secret should be created. | `string` | `null` | no |
| large\_file\_share\_enabled | Is Large File Share Enabled?. | `bool` | `true` | no |
| lifecycles | "List of maps of Azure Storage Account Management Policies<pre>name - (Required) A rule name can contain any combination of alpha numeric characters. Rule name is case-sensitive. It must be unique within a policy.<br>  enabled - (Required) Boolean to specify whether the rule is enabled.<br>  prefix_match - An array of strings for prefixes to be matched.<br>  blob_types - An array of predefined values. Valid options are blockBlob and appendBlob.<br>  base_blob - A map that supports the following:<br>    tier_to_cool_after_days - The age in days after last modification to tier blobs to cool storage. Supports blob currently at Hot tier. Must be between 0 and 99999.<br>    tier_to_archive_after_days - The age in days after last modification to tier blobs to archive storage. Supports blob currently at Hot or Cool tier. Must be between 0 and 99999.<br>    delete_after_days - The age in days after last modification to delete the blob. Must be between 0 and 99999.</pre> | `any` | `[]` | no |
| location | Azure location | `string` | `"Canada Central"` | no |
| log\_analytics\_workspace\_id | Id for log\_analytics\_workspace. Used to specify the destination for 'audit' logs. If not provided, a default log analytics workspace is choosen as the destination. | `string` | `null` | no |
| name\_override | This variable will override the default naming convention when required | `any` | `null` | no |
| nfsv3\_enabled | Is NFSv3 protocol enabled? Changing this forces a new resource to be created. | `bool` | `false` | no |
| project\_name | Project name | `string` | n/a | yes |
| projectcode | Assigned project code | `string` | `null` | no |
| purge\_protection\_kv | Disable purge protection for key vault | `bool` | `true` | no |
| queue\_encryption\_key\_type | The encryption type of the queue service. Possible values are Service and Account. Changing this forces a new resource to be created. Default value is Service. | `string` | `"Service"` | no |
| queue\_properties | A queue\_properties (Optional) block<pre>type = object({<br>    cors_rule = list(object({<br>      allowed_headers    = list(string)<br>      allowed_methods    = list(string)<br>      allowed_origins    = list(string)<br>      exposed_headers    = list(string)<br>      max_age_in_seconds = number<br>    }))<br><br>    logging = object({<br>      delete                = bool<br>      read                  = bool<br>      version               = string<br>      write                 = bool<br>      retention_policy_days = number<br>    })<br><br>    minute_metrics = object({<br>      enabled               = bool<br>      version               = string<br>      include_apis          = bool<br>      retention_policy_days = number<br>    })<br><br>    hour_metrics = object({<br>      enabled               = bool<br>      version               = string<br>      include_apis          = bool<br>      retention_policy_days = number<br>    })<br>  })<br><br>  A cors_rule block (Optional) supports the following:<br>    allowed_headers [list(string)] - (Required) A list of headers that are allowed to be a part of the cross-origin request.<br>    allowed_methods [list(string)] - (Required) A list of http methods that are allowed to be executed by the origin. Valid options are DELETE, GET, HEAD, MERGE, POST, OPTIONS, PUT or PATCH.<br>    allowed_origins [list(string)] - (Required) A list of origin domains that will be allowed by CORS.<br>    exposed_headers [list(string)] - (Required) A list of response headers that are exposed to CORS clients.<br>    max_age_in_seconds [number] - (Required) The number of seconds the client should cache a preflight response.<br><br>  A logging (Optional) block supports the following:<br>    delete [bool] - (Required) Indicates whether all delete requests should be logged. Changing this forces a new resource.<br>    read [bool] - (Required) Indicates whether all read requests should be logged. Changing this forces a new resource.<br>    version [string] - (Required) The version of storage analytics to configure. Changing this forces a new resource.<br>    write [bool] - (Required) Indicates whether all write requests should be logged. Changing this forces a new resource.<br>    retention_policy_days [number] - (Optional) Specifies the number of days that logs will be retained. Changing this forces a new resource.<br><br>  A minute_metrics (Optional) block supports the following:<br>    enabled [bool] - (Required) Indicates whether minute metrics are enabled for the Queue service. Changing this forces a new resource.<br>    version [string] - (Required) The version of storage analytics to configure. Changing this forces a new resource.<br>    include_apis [bool] - (Optional) Indicates whether metrics should generate summary statistics for called API operations.<br>    retention_policy_days [number] - (Optional) Specifies the number of days that logs will be retained. Changing this forces a new resource.<br><br>  A hour_metrics (Optional) block supports the following:<br>    enabled [bool] - (Required) Indicates whether hour metrics are enabled for the Queue service. Changing this forces a new resource.<br>    version [string] - (Required) The version of storage analytics to configure. Changing this forces a new resource.<br>    include_apis [bool] - (Optional) Indicates whether metrics should generate summary statistics for called API operations.<br>    retention_policy_days [number] - (Optional) Specifies the number of days that logs will be retained. Changing this forces a new resource.</pre> | `any` | `null` | no |
| queues | Map to create a Queue within an Azure Storage Account.<pre>type = list(object({<br>    name     = string<br>    metadata = map(string)<br>  }))<br><br>  name [string] - (Required) The name of the storage queues. Must be unique within the storage account the table is located<br>  metadata [map(string)] - (Optional) A mapping of MetaData which should be assigned to this Storage Queue.</pre> | `any` | `[]` | no |
| replication\_override | (Optional) This variable will override the default replication type | `string` | `null` | no |
| resource\_group\_name | Resource group name | `string` | `null` | no |
| routing | A routing (Optional) block<pre>type = object({<br>    publish_internet_endpoints  = bool<br>    publish_microsoft_endpoints = bool<br>    choice                      = string<br>  })<br><br>  publish_internet_endpoints [bool] - (Optional) Should internet routing storage endpoints be published? Defaults to false.<br>  publish_microsoft_endpoints [bool] - (Optional) Should microsoft routing storage endpoints be published? Defaults to false.<br>  choice [string] - (Optional) Specifies the kind of network routing opted by the user. Possible values are InternetRouting and MicrosoftRouting. Defaults to MicrosoftRouting</pre> | `any` | `null` | no |
| share\_properties | A share\_properties block<pre>type = object({<br>    cors_rule = list(object({<br>      allowed_headers    = list(string)<br>      allowed_methods    = list(string)<br>      allowed_origins    = list(string)<br>      exposed_headers    = list(string)<br>      max_age_in_seconds = number<br>    }))<br><br>    retention_policy = object({<br>      days = number<br>    })<br><br>    smb = object({<br>      versions                        = list(string)<br>      authentication_types            = list(string)<br>      kerberos_ticket_encryption_type = list(string)<br>      channel_encryption_type         = list(string)<br>    })<br>  })<br><br>  A cors_rule (Optional) block supports the following:<br>    allowed_headers [list(string)] - (Required) A list of headers that are allowed to be a part of the cross-origin request.<br>    allowed_methods [list(string)] - (Required) A list of http methods that are allowed to be executed by the origin. Valid options are DELETE, GET, HEAD, MERGE, POST, OPTIONS, PUT or PATCH.<br>    allowed_origins [list(string)] - (Required) A list of origin domains that will be allowed by CORS.<br>    exposed_headers [list(string)] - (Required) A list of response headers that are exposed to CORS clients.<br>    max_age_in_seconds [number] - (Required) The number of seconds the client should cache a preflight response.<br><br>  A retention_policy (Optional) block supports the following:<br>    days - (Optional) Specifies the number of days that the azurerm_storage_share should be retained, between 1 and 365 days. Defaults to 90<br><br>  A smb (Optional) block supports the following:<br>    versions [list(string)] - (Optional) A set of SMB protocol versions. Possible values are SMB2.1, SMB3.0, and SMB3.1.1.<br>    authentication_types [list(string)] - (Optional) A set of SMB authentication methods. Possible values are NTLMv2, and Kerberos.<br>    kerberos_ticket_encryption_type [list(string)] - (Optional) A set of Kerberos ticket encryption. Possible values are RC4-HMAC, and AES-256.<br>    channel_encryption_type [list(string)] - (Optional) A set of SMB channel encryption. Possible values are AES-128-CCM, AES-128-GCM, and AES-256-GCM.</pre> | `any` | `null` | no |
| shared\_access\_key\_enabled | Indicates whether the storage account permits requests to be authorized with the account access key via Shared Key. If false, then all requests, including shared access signatures, must be authorized with Azure Active Directory (Azure AD). | `bool` | `true` | no |
| shares | Map to create a File Share within Azure Storage.<pre>type = list(object({<br>    name             = string<br>    folders          = list(string)<br>    access_tier      = string<br>    enabled_protocol = string<br>    quota            = number<br>    metadata         = map(string)<br>    acl = list(object({<br>      id = string<br>      access_policy = list(object({<br>        start       = string<br>        expiry      = string<br>        permissions = string<br>      }))<br>    }))<br>  }))<br><br>  name [string] - (Required) The name of the share. Must be unique within the storage account where the share is located<br>  folders [list(string)] - (Required) The name of the File Share where this Directory should be created. Changing this forces a new resource to be created<br>  access_tier [string] - (Optional) The access tier of the File Share. Possible values are Hot, Cool and TransactionOptimized, Premium<br>  enabled_protocol [string] - (Optional) The protocol used for the share. Possible values are SMB and NFS. The SMB indicates the share can be accessed by SMBv3.0, SMBv2.1 and REST. The NFS indicates the share can be accessed by NFSv4.1. Defaults to SMB. Changing this forces a new resource to be created.<br>    NOTE:<br>    The Premium SKU of the azurerm_storage_account is required for the NFS protocol.<br>  quota [number] -  (Required) The maximum size of the share, in gigabytes. For Standard storage accounts, this must be 1GB (or higher) and at most 5120 GB (5 TB). For Premium FileStorage storage accounts, this must be greater than 100 GB and at most 102400 GB (100 TB)<br>  metadata [map(string)] - (Optional) A mapping of MetaData which should be assigned to this Storage shares.<br><br>  A acl (Optional) block supports the following:<br>    id [string] - (Required) The ID which should be used for this Shared Identifier.<br>    An access_policy (Required) block as defined below.<br>      permissions [string] - (Required) The permissions which should be associated with this Shared Identifier. Possible value is combination of r (read), w (write), d (delete), and l (list).<br>        Note:<br>        Permission order is strict at the service side, and permissions need to be listed in the order above.<br>      start [string] - (Optional) The time at which this Access Policy should be valid from, in ISO8601 format.<br>      expiry [string] - (Optional) The time at which this Access Policy should be valid until, in ISO8601 format.</pre> | `any` | `[]` | no |
| static\_website | A static\_website (Optional) block<pre>type = object({<br>    index_document     = string<br>    error_404_document = string<br>  })<br><br>  index_document [string] - (Optional) The webpage that Azure Storage serves for requests to the root of a website or any subfolder. For example, index.html. The value is case-sensitive.<br>  error_404_document [string] - (Optional) The absolute path to a custom webpage that should be used when a request is made which does not correspond to an existing file.</pre> | `any` | `null` | no |
| subnet\_name | (Optional) Override Only - Specifies the name of the Subnet | `string` | `null` | no |
| table\_encryption\_key\_type | The encryption type of the table service. Possible values are Service and Account. Changing this forces a new resource to be created. Default value is Service. | `string` | `"Service"` | no |
| tables | Map to create a Table within an Azure Storage Account.<pre>type = list(object({<br>    name = string<br>    acl = list(object({<br>      id = string<br>      access_policy = list(object({<br>        start       = string<br>        expiry      = string<br>        permissions = string<br>      }))<br>    }))<br>    partition_key = string<br>    row_key       = string<br>    entity        = map(string)<br>  }))<br><br><br>  name [string] - (Required) The name of the storage table. Must be unique within the storage account the table is located<br><br>  A acl (Optional) block supports the following:<br>    id [string] - (Required) The ID which should be used for this Shared Identifier.<br>    A access_policy (Required) block supports the following:<br>      start [string] - (Required) The ISO8061 UTC time at which this Access Policy should be valid from<br>      expiry [string] - (Required) The ISO8061 UTC time at which this Access Policy should be valid until<br>      permissions [string] - (Required) The permissions which should associated with this Shared Identifier<br><br>  partition_key [string] - (Required) The key for the partition where the entity will be inserted/merged. Changing this forces a new resource<br>  row_key [string] - (Required) The key for the row where the entity will be inserted/merged. Changing this forces a new resource.<br>  entity [map(string)] - (Required) A map of key/value pairs that describe the entity to be inserted/merged in to the storage table</pre> | `any` | `[]` | no |
| tags | Tags to apply to all resources created. | `map(string)` | `{}` | no |
| vault\_principal\_id | The principal id for the vault.azure.net global spn | `string` | `"540f8220-7b42-4b86-b08b-d13146b3a8ec"` | no |
| vault\_type | Which Vault type will this resource store its secrets. hashicorp, akv, or none | `string` | `"akv"` | no |
| virtual\_network\_subnet\_ids | virtual network subnet ids attached to stg account | `list` | `[]` | no |
| vnet\_name | (Optional) Override Only - Specifies the name of the Virtual Network this Subnet is located within | `string` | `null` | no |
| vnet\_rg | (Optional) Override Only - Specifies the name of the resource group the Virtual Network is located in | `string` | `null` | no |
| enable\_audit\_diagnostics | (Optional) Override Only - Enable audit diagnostic settings | `bool` | `true` | no |

## Outputs

| Name | Description |
|------|-------------|
| storag\_account\_container\_name | Name of the containers |
| storage\_account\_container\_has\_immutability\_policy | Is there an Immutability Policy configured on this Storage Container? |
| storage\_account\_container\_has\_legal\_hold | Is there a Legal Hold configured on this Storage Container? |
| storage\_account\_container\_id | The ID of the Storage Container |
| storage\_account\_container\_resource\_manager\_id | The Resource Manager ID of this Storage Container |
| storage\_account\_dfs\_id | ID of the datalake shares created |
| storage\_account\_dfs\_name | Name of the datalake shares created |
| storage\_account\_id | ID of storage account create |
| storage\_account\_identity | The Tenant ID for the Service Principal associated with the Identity of this Storage Account |
| storage\_account\_name | Name of storage account create |
| storage\_account\_primary\_access\_key | The primary access key for the storage account |
| storage\_account\_primary\_blob\_connection\_string | The connection string associated with the primary blob location |
| storage\_account\_primary\_blob\_endpoint | The endpoint URL for blob storage in the primary location |
| storage\_account\_primary\_blob\_host | The hostname with port if applicable for blob storage in the primary location |
| storage\_account\_primary\_connection\_string | The connection string associated with the primary location |
| storage\_account\_primary\_dfs\_endpoint | The endpoint URL for DFS storage in the primary location |
| storage\_account\_primary\_dfs\_host | The hostname with port if applicable for DFS storage in the primary location |
| storage\_account\_primary\_file\_endpoint | The endpoint URL for file storage in the primary location |
| storage\_account\_primary\_file\_host | The hostname with port if applicable for file storage in the primary location |
| storage\_account\_primary\_location | The primary location of the storage account |
| storage\_account\_primary\_queue\_endpoint | The endpoint URL for queue storage in the primary location |
| storage\_account\_primary\_queue\_host | The hostname with port if applicable for queue storage in the primary location |
| storage\_account\_primary\_table\_endpoint | The endpoint URL for table storage in the primary location |
| storage\_account\_primary\_table\_host | The hostname with port if applicable for table storage in the primary location |
| storage\_account\_primary\_web\_endpoint | The endpoint URL for web storage in the primary location |
| storage\_account\_primary\_web\_host | The hostname with port if applicable for web storage in the primary location |
| storage\_account\_queue\_id | The ID of the queue that is created within Storage Account. |
| storage\_account\_queue\_name | Name of the queue that is created within Storage Account. |
| storage\_account\_secondary\_access\_key | The secondary access key for the storage account |
| storage\_account\_secondary\_blob\_connection\_string | The connection string associated with the secondary blob location |
| storage\_account\_secondary\_blob\_endpoint | The endpoint URL for blob storage in the secondary location |
| storage\_account\_secondary\_blob\_host | The hostname with port if applicable for blob storage in the secondary location |
| storage\_account\_secondary\_connection\_string | The connection string associated with the secondary location |
| storage\_account\_secondary\_dfs\_endpoint | The endpoint URL for DFS storage in the secondary location |
| storage\_account\_secondary\_dfs\_host | The hostname with port if applicable for DFS storage in the secondary location |
| storage\_account\_secondary\_file\_endpoint | The endpoint URL for file storage in the secondary location |
| storage\_account\_secondary\_file\_host | The hostname with port if applicable for file storage in the secondary location |
| storage\_account\_secondary\_location | The secondary location of the storage account |
| storage\_account\_secondary\_queue\_endpoint | The endpoint URL for queue storage in the secondary location |
| storage\_account\_secondary\_queue\_host | The hostname with port if applicable for queue storage in the secondary location |
| storage\_account\_secondary\_table\_endpoint | The endpoint URL for table storage in the secondary location |
| storage\_account\_secondary\_table\_host | The hostname with port if applicable for table storage in the secondary location |
| storage\_account\_secondary\_web\_endpoint | The endpoint URL for web storage in the secondary location |
| storage\_account\_secondary\_web\_host | The hostname with port if applicable for web storage in the secondary location |
| storage\_account\_share\_directory\_id | The ID of the Directory within the File Share |
| storage\_account\_share\_directory\_name | List of the share directories created |
| storage\_account\_share\_id | ID of the shares getting created |
| storage\_account\_share\_name | Names of the shares getting created |
| storage\_account\_share\_resource\_manager\_id | The Resource Manager ID of this File Share |
| storage\_account\_share\_url | The URL of the File Share |
| storage\_account\_table\_entity\_id | Name of the Entity within the Table in the Storage Account. |
| storage\_account\_table\_entity\_name | Name of the Entity within the Table in the Storage Account. |
| storage\_account\_table\_id | The ID of the Table within the Storage Account. |
| storage\_account\_table\_name | Name of the Table within the Storage Account. |
